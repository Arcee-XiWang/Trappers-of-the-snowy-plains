<!DOCTYPE html>
<html lang="en">

<head>
  <!-- 设置页面字符编码为UTF-8 -->
  <meta charset="UTF-8">
  <!-- 配置页面的视口，确保页面在不同设备上有良好的显示效果 -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- 引入Bootstrap的CSS文件，用于快速搭建美观且响应式的页面 -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
    integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
  <!-- 设置页面的图标 -->
  <link rel="shortcut icon" href="图标.ico">
  <!-- 设置页面标题 -->
  <title>注册</title>
  <style>
    html {
      position: relative;
    }

    /* 设置页面背景图片 */
    body {
      background-image: url(./images/雪捕背景.jpg);
    }

    /*返回首页按钮样式*/
    a.return-home {
      position: absolute;
      top: 10px;
      left: 10px;
      text-decoration: none;
      color: black;
      background-color: rgba(239, 230, 230);
      padding: 5px 10px;
      border-radius: 5px;
    }

    /* 使h1标题居中显示，并调整其上边距 */
    h1 {
      text-align: center;
      margin-top: -20px;
    }

    /* 设置表单的布局和样式 */
    form {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background-color: #fff;
      width: 380px;
      height: 410px;
      margin: 0 auto;
      border-radius: 5px;
      margin-top: 100px;
    }

    /* 设置表单内div元素的样式 */
    form>div {
      width: 357px;
      padding-top: 20px;
      margin: 0 auto;
    }

    /* 设置表单内按钮的样式 */
    form>button {
      margin-right: 10px;
      text-align: center;
      width: 300px;
      height: 40px;
      font-size: larger;
    }

    /* 定义具有lg类的元素初始为隐藏状态 */
    .lg {
      margin-bottom: 9px;
      display: none;
    }

    /* 设置输入框的宽度、高度和字体大小 */
    #exampleInputEmail1,
    #exampleInputPassword1,
    #exampleInputPassword2 {
      width: 300px;
      height: 40px;
      font-size: larger;
    }

    /* 设置复选框的左边距 */
    #exampleCheck1 {
      margin-left: 24px;
    }

    /* 设置进度条的样式 */
    #advance {
      height: 20px;
      margin-top: 8px;
      width: 347px;
      display: inline;
    }

    /* 设置与个人相关的图标样式 */
    #person {
      margin-bottom: 8px;
    }

    /* 设置锁图标样式 */
    .lock {
      margin-bottom: 6px;
    }

    /* 设置注册成功提示框的样式 */
    #appear {
      position: absolute;
      left: 560px;
      top: 130px;
      width: 150px;
      height: 60px;
      font-size: larger;
      background-color: rgb(194, 194, 197);
      text-align: center;
      padding: 15px 0px 15px 15px;
      border-radius: 5px;
    }

    /* 媒体查询：当屏幕宽度小于等于380px时，调整表单及相关元素的样式 */
    @media (max-width: 380px) {
      form {
        width: 100%;
        height: 620px;
      }

      form>div {
        width: 100%;
      }

      form>button {
        width: 100%;
      }

      #exampleInputEmail1,
      #exampleInputPassword1,
      #exampleInputPassword2 {
        width: 100%
      }
    }
  </style>
</head>

<body>
  <a href="index.html" class="return-home">返回首页></a>
  <!-- 注册表单 -->
  <form>
    <!-- 表单标题 -->
    <h1>注册</h1>
    <div>
      <!-- 用户名前的图标 -->
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16"
        id="person">
        <path d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z" />
      </svg>
      <!-- 用户名输入框，placeholder提示用户输入内容 -->
      <input type="text" id="exampleInputEmail1" placeholder="用户名">
      <!-- 用户名验证通过的图标，初始隐藏 -->
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="lg" viewBox="0 0 16 16"
        id="yes0">
        <path
          d="M12.736 3.97a.733.733 0 0 1 1.047 0c.286.289.29.756.01 1.05L7.88 12.01a.733.733 0 0 1-1.065.02L3.217 8.384a.757.757 0 0 1 0-1.06.733.733 0 0 1 1.047 0l3.052 3.093 5.4-6.425a.247.247 0 0 1.02-.022Z" />
      </svg>
    </div>
    <div>
      <!-- 密码前的图标 -->
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16"
        class="lock">
        <path
          d="M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2zm3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2z" />
      </svg>
      <!-- 密码输入框，type为password表示输入内容会被隐藏 -->
      <input type="password" id="exampleInputPassword1" placeholder="密码" style="display: inline;">
      <!-- 密码验证通过的图标，初始隐藏 -->
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="lg" viewBox="0 0 16 16"
        id="yes">
        <path
          d="M12.736 3.97a.733.733 0 0 1 1.047 0c.286.289.29.756.01 1.05L7.88 12.01a.733.733 0 0 1-1.065.02L3.217 8.384a.757.757 0 0 1 0-1.06.733.733 0 0 1 1.047 0l3.052 3.093 5.4-6.425a.247.247 0 0 1.02-.022Z" />
      </svg>
      <!-- 密码强度进度条 -->
      <div class="progress" id="advance">
        <!-- 弱强度进度条 -->
        <div class="progress-bar progress-bar-striped" role="progressbar" id="weak" style="width: 33.3% ;"
          aria-valuenow="33.3" aria-valuemin="0" aria-valuemax="100">弱</div>
        <!-- 中强度进度条 -->
        <div class="progress-bar progress-bar-striped bg-success" role="progressbar" id="middle" style="width: 33.3%; "
          aria-valuenow="33.3" aria-valuemin="0" aria-valuemax="100">中</div>
        <!-- 高强度进度条 -->
        <div class="progress-bar progress-bar-striped bg-danger" role="progressbar" id="strong" style="width: 33.4%;"
          aria-valuenow="33.4" aria-valuemin="0" aria-valuemax="100">强</div>
      </div>
      <!-- 密码提示信息 -->
      <small id="emailHelp" class="form-text text-muted">长度为6-10位,至少包括数字、大小写英文字母中的两种</small>
    </div>
    <div>
      <!-- 确认密码前的图标 -->
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16"
        class="lock">
        <path
          d="M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2zm3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2z" />
      </svg>
      <!-- 确认密码输入框 -->
      <input type="password" id="exampleInputPassword2" placeholder="确认密码">
      <!-- 确认密码验证通过的图标，初始隐藏 -->
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="lg" viewBox="0 0 16 16"
        id="yes2">
        <path
          d="M12.736 3.97a.733.733 0 0 1 1.047 0c.286.289.29.756.01 1.05L7.88 12.01a.733.733 0 0 1-1.065.02L3.217 8.384a.757.757 0 0 1 0-1.06.733.733 0 0 1 1.047 0l3.052 3.093 5.4-6.425a.247.247 0 0 1.02-.022Z" />
      </svg>
    </div>
    <div>
      <!-- 服务协议复选框 -->
      <input type="checkbox" id="exampleCheck1">
      <!-- 服务协议复选框的标签 -->
      <label for="exampleCheck1">注册即表示同意服务协议</label>
      <!-- 跳转首页 -->
      <a href="index.html" id="firstjump"></a>
    </div>
    <!-- 注册按钮，初始为禁用状态 -->
    <button type="button" id="but" disabled>注册</button>

  </form>
  <!-- 注册成功提示框，初始隐藏 -->
  <div id="appear" style="display: none;">注册成功！</div>
  <!-- 引入jQuery库，用于简化DOM操作和事件处理 -->
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"
    integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
    crossorigin="anonymous"></script>
  <!-- 引入Bootstrap的JavaScript文件，提供各种交互功能 -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-7ymO4nGrkm372HoSbq1OY2DP4pEZnMiA+E0F3zPr+JQQtQ82gQ1HPY3QIVtztVua"
    crossorigin="anonymous"></script>
  <script>
    let count = 0
    var count0 = 0
    var count1 = 0
    var count2 = 0
    let yes = document.getElementById('yes')
    let yes0 = document.getElementById('yes0')
    let yes2 = document.getElementById('yes2')
    let username = document.getElementById('exampleInputEmail1')
    let pas1 = document.getElementById('exampleInputPassword1')
    let pas2 = document.getElementById('exampleInputPassword2')
    let but = document.getElementById('but')
    let che = document.getElementById('exampleCheck1')
    let advance = document.getElementById('advance')
    let weak = document.getElementById('weak')
    let middle = document.getElementById('middle')
    let strong = document.getElementById('strong')

    // 密码强度判断函数
    function yesfunc() {
      yes.style.display = 'none'
      // 如果密码输入框有值
      if (pas1.value) {
        advance.style.display = 'flex'
        middle.style.display = 'none'
        strong.style.display = 'none'
        // 检查密码是否包含数字,字母
        let hasnu = /\d/.test(pas1.value)
        let hasdo = /[a-z]/.test(pas1.value)
        let hasup = /[A-Z]/.test(pas1.value)
        // 如果密码包含小写字母、大写字母和数字
        if (hasdo && hasup && hasnu) {
          // 显示中强度和高强度进度条
          middle.style.display = 'flex'
          strong.style.display = 'flex'
          // 如果密码长度在6到10位之间
          if (pas1.value.length >= 6 && pas1.value.length <= 10) {
            yes.style.display = 'inline-block'
            count1 = 1
            // 如果服务协议复选框被选中且所有条件都满足
            if (che.checked && (count0 + count1 + count2) == 3) {
              but.disabled = false
            }
          }
          else {
            alert('密码长度不符合要求，请重新输入')
          }
        }
        // 如果密码包含小写字母和数字，或小写字母和大写字母，或大写字母和数字
        else if (hasdo && hasnu || hasdo && hasup || hasdo && hasup) {
          middle.style.display = 'flex'
          if (pas1.value.length >= 6 && pas1.value.length <= 10) {
            yes.style.display = 'inline-block'
            count1 = 1
            if (che.checked && (count0 + count1 + count2) == 3) {
              but.disabled = false
            }
          }
          else {
            alert('密码长度不符合要求，请重新输入')
          }
        }
      }
      else { alert('密码不能为空') }
      if (event) {
        event.preventDefault()
      }

    }

    // 确认密码判断函数
    function yesfunc2() {
      if (pas2.value) {
        if (pas1.value == pas2.value) {
          count2 = 1
          yes2.style.display = 'inline-block'
          if (che.checked && (count0 + count1 + count2) == 3) {
            but.disabled = false
          }
        }
        else { alert('与第一次输入的密码不一致') }
        if (event) { event.preventDefault() }
      }
      else { alert('密码不能为空') }
    }
    // 用户名判断函数
    function yesfunc0() {
      if (event.keyCode === 13) {
        if (username.value) {
          count0 = 1
          event.preventDefault()
          yes0.style.display = 'inline-block'
          if (che.checked && (count0 + count1 + count2) == 3) {
            but.disabled = false
          }
        }
        else {
          alert('用户名不能为空！')
        }
      }
    }
    username.addEventListener('keydown', function (event) {
      if (event.keyCode === 13) {
        yesfunc0()
      }
    })
    pas1.addEventListener('keydown', function (event) {
      if (event.keyCode === 13) {
        yesfunc()
      }
    })
    pas2.addEventListener('keydown', function (event) {
      if (event.keyCode === 13) {
        yesfunc2()
      }
    })
    but.disabled = true
    // 服务协议判断函数
    che.addEventListener('click', function (event) {
      if (event.target.checked == true) {
        alert('服务协议')
        if (che.checked && (count0 + count1 + count2) == 3) {
          but.disabled = false
        }
      }
    })
    // 注册成功后跳转函数
    but.addEventListener('click', function () {
      document.getElementById('appear').style.display = 'block'
      setTimeout(function () {
        document.getElementById('firstjump').click()
      }, 1000);
    })
  </script>
</body>

</html>
